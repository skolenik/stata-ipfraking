. use trip_sample_rules, clear

. wgtcellcollapse collapse, variables(daypart board_id) mincellsize(1) ///
>         zeroes(39 44 49 60) greedy maxcategory(99) ///
>         generate(dpston5) saving(dpston5.do) replace run
Pass 0 through the data...
  smallest count = 1 in the cell      2000039

Processing zero cells...

  Invoking rule 49:50=24950 to collapse zero cells
  replace dpston5 = 1024950 if inlist(dpston5, 1000049, 1000050)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 40:44=24044 to collapse zero cells
  replace dpston5 = 2024044 if inlist(dpston5, 2000040, 2000044)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 49:50=24950 to collapse zero cells
  replace dpston5 = 2024950 if inlist(dpston5, 2000049, 2000050)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 55:60=25560 to collapse zero cells
  replace dpston5 = 2025560 if inlist(dpston5, 2000055, 2000060)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 36:39:40=33640 to collapse zero cells
  replace dpston5 = 4033640 if inlist(dpston5, 4000036, 4000039, 4000040)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 49:50=24950 to collapse zero cells
  replace dpston5 = 4024950 if inlist(dpston5, 4000049, 4000050)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 49:50:53:55:60=54960 to collapse zero cells
  replace dpston5 = 4054960 if inlist(dpston5, 4000049, 4000050, 4000053, 4000055, 4000060)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 39:40=23940 to collapse zero cells
  replace dpston5 = 5023940 if inlist(dpston5, 5000039, 5000040)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 49:50=24950 to collapse zero cells
  replace dpston5 = 5024950 if inlist(dpston5, 5000049, 5000050)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 55:60=25560 to collapse zero cells
  replace dpston5 = 5025560 if inlist(dpston5, 5000055, 5000060)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
Pass 10 through the data...
  smallest count = 1 in the cell      2000039
  Done collapsing! Exiting...

. wgtcellcollapse collapse, variables(daypart board_id) mincellsize(20) ///
>         strict feed(dpston5) saving(dpston5.do) append run
Pass 10 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 39:24044=33944
  replace dpston5 = 2033944 if inlist(dpston5, 2000039, 2024044)
Pass 11 through the data...
  smallest count = 1 in the cell      2024950
  Invoking rule 53:24950=34953
  replace dpston5 = 2034953 if inlist(dpston5, 2000053, 2024950)
Pass 12 through the data...
  smallest count = 1 in the cell      2025560
  Invoking rule 34953:25560=54960
  replace dpston5 = 2054960 if inlist(dpston5, 2034953, 2025560)
Pass 13 through the data...
  smallest count = 1 in the cell      3000039
  Invoking rule 39:40=23940
  replace dpston5 = 3023940 if inlist(dpston5, 3000039, 3000040)
Pass 14 through the data...
  smallest count = 1 in the cell      4000044
  Invoking rule 44:33640=43644
  replace dpston5 = 4043644 if inlist(dpston5, 4000044, 4033640)
Pass 15 through the data...
  smallest count = 1 in the cell      4024950
  Invoking rule 47:24950=34750
  replace dpston5 = 4034750 if inlist(dpston5, 4000047, 4024950)
Pass 16 through the data...
  smallest count = 1 in the cell      5000024
  Invoking rule 18:24=21824
  replace dpston5 = 5021824 if inlist(dpston5, 5000018, 5000024)
Pass 17 through the data...
  smallest count = 1 in the cell      5023940
  Invoking rule 44:23940=33944
  replace dpston5 = 5033944 if inlist(dpston5, 5000044, 5023940)
Pass 18 through the data...
  smallest count = 1 in the cell      5024950
  Invoking rule 53:24950=34953
  replace dpston5 = 5034953 if inlist(dpston5, 5000053, 5024950)
Pass 19 through the data...
  smallest count = 2 in the cell      2000036
  Invoking rule 36:33944=43644
  replace dpston5 = 2043644 if inlist(dpston5, 2000036, 2033944)
Pass 20 through the data...
  smallest count = 2 in the cell      4043644
  Invoking rule 43644:34750=73650
  replace dpston5 = 4073650 if inlist(dpston5, 4043644, 4034750)
Pass 21 through the data...
  smallest count = 2 in the cell      5025560
  Invoking rule 34953:25560=54960
  replace dpston5 = 5054960 if inlist(dpston5, 5034953, 5025560)
Pass 22 through the data...
  smallest count = 3 in the cell      2000024
  Invoking rule 18:24=21824
  replace dpston5 = 2021824 if inlist(dpston5, 2000018, 2000024)
Pass 23 through the data...
  smallest count = 3 in the cell      3023940
  Invoking rule 44:23940=33944
  replace dpston5 = 3033944 if inlist(dpston5, 3000044, 3023940)
Pass 24 through the data...
  smallest count = 3 in the cell      4000024
  Invoking rule 18:24=21824
  replace dpston5 = 4021824 if inlist(dpston5, 4000018, 4000024)
Pass 25 through the data...
  smallest count = 3 in the cell      5000001
  Invoking rule 1:2=20102
  replace dpston5 = 5020102 if inlist(dpston5, 5000001, 5000002)
Pass 26 through the data...
  smallest count = 3 in the cell      5000068
  Invoking rule 62:68=26268
  replace dpston5 = 5026268 if inlist(dpston5, 5000062, 5000068)
Pass 27 through the data...
  smallest count = 4 in the cell      2000001
  Invoking rule 1:2=20102
  replace dpston5 = 2020102 if inlist(dpston5, 2000001, 2000002)
Pass 28 through the data...
  smallest count = 4 in the cell      2000008
  Invoking rule 8:20102=30108
  replace dpston5 = 2030108 if inlist(dpston5, 2000008, 2020102)
Pass 29 through the data...
  smallest count = 4 in the cell      2043644
  Invoking rule 30:43644=53044
  replace dpston5 = 2053044 if inlist(dpston5, 2000030, 2043644)
Pass 30 through the data...
  smallest count = 4 in the cell      3000050
  Invoking rule 49:50=24950
  replace dpston5 = 3024950 if inlist(dpston5, 3000049, 3000050)
Pass 31 through the data...
  smallest count = 4 in the cell      5033944
  Invoking rule 47:33944=43947
  replace dpston5 = 5043947 if inlist(dpston5, 5000047, 5033944)
Pass 32 through the data...
  smallest count = 5 in the cell      1000039
  Invoking rule 39:40=23940
  replace dpston5 = 1023940 if inlist(dpston5, 1000039, 1000040)
Pass 33 through the data...
  smallest count = 5 in the cell      3000060
  Invoking rule 55:60=25560
  replace dpston5 = 3025560 if inlist(dpston5, 3000055, 3000060)
Pass 34 through the data...
  smallest count = 5 in the cell      4000026
  Invoking rule 26:21824=31826
  replace dpston5 = 4031826 if inlist(dpston5, 4000026, 4021824)
Pass 35 through the data...
  smallest count = 5 in the cell      5021824
  Invoking rule 26:21824=31826
  replace dpston5 = 5031826 if inlist(dpston5, 5000026, 5021824)
Pass 36 through the data...
  smallest count = 6 in the cell      2000068
  Invoking rule 62:68=26268
  replace dpston5 = 2026268 if inlist(dpston5, 2000062, 2000068)
Pass 37 through the data...
  smallest count = 6 in the cell      2054960
  Invoking rule 54960:26268=74968
  replace dpston5 = 2074968 if inlist(dpston5, 2054960, 2026268)
Pass 38 through the data...
  smallest count = 6 in the cell      4000002
  Invoking rule 1:2=20102
  replace dpston5 = 4020102 if inlist(dpston5, 4000001, 4000002)
Pass 39 through the data...
  smallest count = 7 in the cell      4054960
  Invoking rule 62:54960=64962
  replace dpston5 = 4064962 if inlist(dpston5, 4000062, 4054960)
Pass 40 through the data...
  smallest count = 8 in the cell      2021824
  Invoking rule 26:21824=31826
  replace dpston5 = 2031826 if inlist(dpston5, 2000026, 2021824)
Pass 41 through the data...
  smallest count = 8 in the cell      5054960
  Invoking rule 43947:54960=93960
  replace dpston5 = 5093960 if inlist(dpston5, 5043947, 5054960)
Pass 42 through the data...
  smallest count = 10 in the cell      1000055
  Invoking rule 55:60=25560
  replace dpston5 = 1025560 if inlist(dpston5, 1000055, 1000060)
Pass 43 through the data...
  smallest count = 10 in the cell      4073650
  Invoking rule 30:73650=83050
  replace dpston5 = 4083050 if inlist(dpston5, 4000030, 4073650)
Pass 44 through the data...
  smallest count = 10 in the cell      5020102
  Invoking rule 8:20102=30108
  replace dpston5 = 5030108 if inlist(dpston5, 5000008, 5020102)
Pass 45 through the data...
  smallest count = 11 in the cell      3000001
  Invoking rule 1:2=20102
  replace dpston5 = 3020102 if inlist(dpston5, 3000001, 3000002)
Pass 46 through the data...
  smallest count = 11 in the cell      4000068
  Invoking rule 68:64962=74968
  replace dpston5 = 4074968 if inlist(dpston5, 4000068, 4064962)
Pass 47 through the data...
  smallest count = 11 in the cell      5031826
  Invoking rule 30:31826=41830
  replace dpston5 = 5041830 if inlist(dpston5, 5000030, 5031826)
Pass 48 through the data...
  smallest count = 12 in the cell      2030108
  Invoking rule 11:30108=40111
  replace dpston5 = 2040111 if inlist(dpston5, 2000011, 2030108)
Pass 49 through the data...
  smallest count = 12 in the cell      3033944
  Invoking rule 36:33944=43644
  replace dpston5 = 3043644 if inlist(dpston5, 3000036, 3033944)
Pass 50 through the data...
  smallest count = 12 in the cell      4031826
  Invoking rule 11:31826=41126
  replace dpston5 = 4041126 if inlist(dpston5, 4000011, 4031826)
Pass 51 through the data...
  smallest count = 13 in the cell      1024950
  Invoking rule 53:24950=34953
  replace dpston5 = 1034953 if inlist(dpston5, 1000053, 1024950)
Pass 52 through the data...
  smallest count = 13 in the cell      3024950
  Invoking rule 53:24950=34953
  replace dpston5 = 3034953 if inlist(dpston5, 3000053, 3024950)
Pass 53 through the data...
  smallest count = 13 in the cell      4020102
  Invoking rule 8:20102=30108
  replace dpston5 = 4030108 if inlist(dpston5, 4000008, 4020102)
Pass 54 through the data...
  smallest count = 15 in the cell      5000036
  Invoking rule 36:41830=51836
  replace dpston5 = 5051836 if inlist(dpston5, 5000036, 5041830)
Pass 55 through the data...
  smallest count = 19 in the cell      3025560
  Invoking rule 62:25560=35562
  replace dpston5 = 3035562 if inlist(dpston5, 3000062, 3025560)
Pass 56 through the data...
  smallest count = 20 in the cell      5026268
  Done collapsing! Exiting...

. assert "`r(failed)'" == ""      

. wgtcellcollapse collapse, variables(daypart alight_id) mincellsize(1) ///
>         zeroes(2 40 49 50 60) greedy maxcategory(99) ///
>         generate(dpstoff5) saving(dpstoff5.do) replace run
Pass 0 through the data...
  smallest count = 1 in the cell      1000002

Processing zero cells...

  Invoking rule 39:40=23940 to collapse zero cells
  replace dpstoff5 = 1023940 if inlist(dpstoff5, 1000039, 1000040)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 1:2:8=30108 to collapse zero cells
  replace dpstoff5 = 2030108 if inlist(dpstoff5, 2000001, 2000002, 2000008)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 30:36:39:40:44=53044 to collapse zero cells
  replace dpstoff5 = 2053044 if inlist(dpstoff5, 2000030, 2000036, 2000039, 2000040, 2000044)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 50:53:55:60:62=55062 to collapse zero cells
  replace dpstoff5 = 2055062 if inlist(dpstoff5, 2000050, 2000053, 2000055, 2000060, 2000062)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 1:2:8=30108 to collapse zero cells
  replace dpstoff5 = 3030108 if inlist(dpstoff5, 3000001, 3000002, 3000008)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 55:60=25560 to collapse zero cells
  replace dpstoff5 = 3025560 if inlist(dpstoff5, 3000055, 3000060)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 1:2:8:11=40111 to collapse zero cells
  replace dpstoff5 = 4040111 if inlist(dpstoff5, 4000001, 4000002, 4000008, 4000011)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 36:39:40:44=43644 to collapse zero cells
  replace dpstoff5 = 4043644 if inlist(dpstoff5, 4000036, 4000039, 4000040, 4000044)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 49:50=24950 to collapse zero cells
  replace dpstoff5 = 4024950 if inlist(dpstoff5, 4000049, 4000050)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 55:60=25560 to collapse zero cells
  replace dpstoff5 = 4025560 if inlist(dpstoff5, 4000055, 4000060)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 1:2:8=30108 to collapse zero cells
  replace dpstoff5 = 5030108 if inlist(dpstoff5, 5000001, 5000002, 5000008)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 36:39:40=33640 to collapse zero cells
  replace dpstoff5 = 5033640 if inlist(dpstoff5, 5000036, 5000039, 5000040)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 49:50=24950 to collapse zero cells
  replace dpstoff5 = 5024950 if inlist(dpstoff5, 5000049, 5000050)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 49:50:53:55:60=54960 to collapse zero cells
  replace dpstoff5 = 5054960 if inlist(dpstoff5, 5000049, 5000050, 5000053, 5000055, 5000060)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
Pass 14 through the data...
  smallest count = 1 in the cell      1000002
  Done collapsing! Exiting...

. * special cells for weekend
. wgtcellcollapse collapse if daypart==5 & inrange(alight_id,1,30), ///
>         variables(daypart alight_id) mincellsize(20) ///
>         strict feed(dpstoff5) saving(dpstoff5.do) append run
Pass 14 through the data...
  smallest count = 1 in the cell      5000026
  Invoking rule 24:26=22426
  replace dpstoff5 = 5022426 if inlist(dpstoff5, 5000024, 5000026)
Pass 15 through the data...
  smallest count = 1 in the cell      5030108
  Invoking rule 11:30108=40111
  replace dpstoff5 = 5040111 if inlist(dpstoff5, 5000011, 5030108)
Pass 16 through the data...
  smallest count = 3 in the cell      5022426
  Invoking rule 18:22426=31826
  replace dpstoff5 = 5031826 if inlist(dpstoff5, 5000018, 5022426)
Pass 17 through the data...
  smallest count = 6 in the cell      5040111
  Invoking rule 40111:31826=70126
  replace dpstoff5 = 5070126 if inlist(dpstoff5, 5040111, 5031826)
Pass 18 through the data...
  smallest count = 8 in the cell      5000030
  Invoking rule 30:70126=80130
  replace dpstoff5 = 5080130 if inlist(dpstoff5, 5000030, 5070126)
Pass 19 through the data...
  smallest count = 21 in the cell      5080130
  Done collapsing! Exiting...

. wgtcellcollapse collapse if daypart==5 & inrange(alight_id,36,68), ///
>         variables(daypart alight_id) mincellsize(20) ///
>         strict feed(dpstoff5) saving(dpstoff5.do) append run
Pass 19 through the data...
  smallest count = 1 in the cell      5024950
  Invoking rule 47:24950=34750
  replace dpstoff5 = 5034750 if inlist(dpstoff5, 5000047, 5024950)
Pass 20 through the data...
  smallest count = 2 in the cell      5000044
  Invoking rule 44:33640=43644
  replace dpstoff5 = 5043644 if inlist(dpstoff5, 5000044, 5033640)
Pass 21 through the data...
  smallest count = 2 in the cell      5054960
  Invoking rule 62:54960=64962
  replace dpstoff5 = 5064962 if inlist(dpstoff5, 5000062, 5054960)
Pass 22 through the data...
  smallest count = 4 in the cell      5043644
  Invoking rule 43644:34750=73650
  replace dpstoff5 = 5073650 if inlist(dpstoff5, 5043644, 5034750)
Pass 23 through the data...
  smallest count = 7 in the cell      5000068
  Invoking rule 68:64962=74968
  replace dpstoff5 = 5074968 if inlist(dpstoff5, 5000068, 5064962)
Pass 24 through the data...
  smallest count = 11 in the cell      5073650
  WARNING: could not find any rules to collapse dpstoff5 == 5073650
Pass 25 through the data...
  smallest count = 18 in the cell      5074968
  WARNING: could not find any rules to collapse dpstoff5 == 5074968
Pass 26 through the data...
  smallest count = .i in the cell      1000002
  Done collapsing! Exiting...

. * all other cells
. wgtcellcollapse collapse, variables(daypart alight_id) mincellsize(20) ///
>         strict feed(dpstoff5) saving(dpstoff5.do) append run
Pass 24 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 2:8=20208
  replace dpstoff5 = 1020208 if inlist(dpstoff5, 1000002, 1000008)
Pass 25 through the data...
  smallest count = 1 in the cell      2000011
  Invoking rule 11:18=21118
  replace dpstoff5 = 2021118 if inlist(dpstoff5, 2000011, 2000018)
Pass 26 through the data...
  smallest count = 1 in the cell      2000024
  Invoking rule 24:26=22426
  replace dpstoff5 = 2022426 if inlist(dpstoff5, 2000024, 2000026)
Pass 27 through the data...
  smallest count = 1 in the cell      2000049
  Invoking rule 49:55062=64962
  replace dpstoff5 = 2064962 if inlist(dpstoff5, 2000049, 2055062)
Pass 28 through the data...
  smallest count = 1 in the cell      2030108
  Invoking rule 30108:21118=50118
  replace dpstoff5 = 2050118 if inlist(dpstoff5, 2030108, 2021118)
Pass 29 through the data...
  smallest count = 1 in the cell      3000039
  Invoking rule 39:40=23940
  replace dpstoff5 = 3023940 if inlist(dpstoff5, 3000039, 3000040)
Pass 30 through the data...
  smallest count = 1 in the cell      3000049
  Invoking rule 49:50=24950
  replace dpstoff5 = 3024950 if inlist(dpstoff5, 3000049, 3000050)
Pass 31 through the data...
  smallest count = 1 in the cell      3030108
  Invoking rule 11:30108=40111
  replace dpstoff5 = 3040111 if inlist(dpstoff5, 3000011, 3030108)
Pass 32 through the data...
  smallest count = 1 in the cell      4000018
  Invoking rule 18:24=21824
  replace dpstoff5 = 4021824 if inlist(dpstoff5, 4000018, 4000024)
Pass 33 through the data...
  smallest count = 1 in the cell      4000026
  Invoking rule 26:21824=31826
  replace dpstoff5 = 4031826 if inlist(dpstoff5, 4000026, 4021824)
Pass 34 through the data...
  smallest count = 1 in the cell      4025560
  Invoking rule 53:25560=35360
  replace dpstoff5 = 4035360 if inlist(dpstoff5, 4000053, 4025560)
Pass 35 through the data...
  smallest count = 2 in the cell      1000050
  Invoking rule 49:50=24950
  replace dpstoff5 = 1024950 if inlist(dpstoff5, 1000049, 1000050)
Pass 36 through the data...
  smallest count = 2 in the cell      2064962
  Invoking rule 68:64962=74968
  replace dpstoff5 = 2074968 if inlist(dpstoff5, 2000068, 2064962)
Pass 37 through the data...
  smallest count = 2 in the cell      3000024
  Invoking rule 24:26=22426
  replace dpstoff5 = 3022426 if inlist(dpstoff5, 3000024, 3000026)
Pass 38 through the data...
  smallest count = 2 in the cell      3000044
  Invoking rule 44:23940=33944
  replace dpstoff5 = 3033944 if inlist(dpstoff5, 3000044, 3023940)
Pass 39 through the data...
  smallest count = 2 in the cell      3024950
  Invoking rule 53:24950=34953
  replace dpstoff5 = 3034953 if inlist(dpstoff5, 3000053, 3024950)
Pass 40 through the data...
  smallest count = 2 in the cell      4024950
  Invoking rule 24950:35360=54960
  replace dpstoff5 = 4054960 if inlist(dpstoff5, 4024950, 4035360)
Pass 41 through the data...
  smallest count = 2 in the cell      4043644
  Invoking rule 47:43644=53647
  replace dpstoff5 = 4053647 if inlist(dpstoff5, 4000047, 4043644)
Pass 42 through the data...
  smallest count = 3 in the cell      1023940
  Invoking rule 36:23940=33640
  replace dpstoff5 = 1033640 if inlist(dpstoff5, 1000036, 1023940)
Pass 43 through the data...
  smallest count = 3 in the cell      2022426
  Invoking rule 50118:22426=70126
  replace dpstoff5 = 2070126 if inlist(dpstoff5, 2050118, 2022426)
Pass 44 through the data...
  smallest count = 3 in the cell      4000062
  Invoking rule 62:68=26268
  replace dpstoff5 = 4026268 if inlist(dpstoff5, 4000062, 4000068)
Pass 45 through the data...
  smallest count = 4 in the cell      2053044
  Invoking rule 47:53044=63047
  replace dpstoff5 = 2063047 if inlist(dpstoff5, 2000047, 2053044)
Pass 46 through the data...
  smallest count = 4 in the cell      3000036
  Invoking rule 36:33944=43644
  replace dpstoff5 = 3043644 if inlist(dpstoff5, 3000036, 3033944)
Pass 47 through the data...
  smallest count = 4 in the cell      4031826
  Invoking rule 40111:31826=70126
  replace dpstoff5 = 4070126 if inlist(dpstoff5, 4040111, 4031826)
Pass 48 through the data...
  smallest count = 5 in the cell      1000060
  Invoking rule 55:60=25560
  replace dpstoff5 = 1025560 if inlist(dpstoff5, 1000055, 1000060)
Pass 49 through the data...
  smallest count = 5 in the cell      1024950
  Invoking rule 53:24950=34953
  replace dpstoff5 = 1034953 if inlist(dpstoff5, 1000053, 1024950)
Pass 50 through the data...
  smallest count = 5 in the cell      2074968
  Invoking rule 63047:74968=133068
  replace dpstoff5 = 2133068 if inlist(dpstoff5, 2063047, 2074968)
Pass 51 through the data...
  smallest count = 5 in the cell      3025560
  Invoking rule 34953:25560=54960
  replace dpstoff5 = 3054960 if inlist(dpstoff5, 3034953, 3025560)
Pass 52 through the data...
  smallest count = 6 in the cell      2070126
  Invoking rule 70126:133068=200168
  replace dpstoff5 = 2200168 if inlist(dpstoff5, 2070126, 2133068)
Pass 53 through the data...
  smallest count = 6 in the cell      4054960
  Invoking rule 53647:54960=103660
  replace dpstoff5 = 4103660 if inlist(dpstoff5, 4053647, 4054960)
Pass 54 through the data...
  smallest count = 9 in the cell      4026268
  Invoking rule 103660:26268=123668
  replace dpstoff5 = 4123668 if inlist(dpstoff5, 4103660, 4026268)
Pass 55 through the data...
  smallest count = 10 in the cell      3022426
  Invoking rule 18:22426=31826
  replace dpstoff5 = 3031826 if inlist(dpstoff5, 3000018, 3022426)
Pass 56 through the data...
  smallest count = 10 in the cell      3043644
  Invoking rule 30:43644=53044
  replace dpstoff5 = 3053044 if inlist(dpstoff5, 3000030, 3043644)
Pass 57 through the data...
  smallest count = 10 in the cell      4070126
  Invoking rule 30:70126=80130
  replace dpstoff5 = 4080130 if inlist(dpstoff5, 4000030, 4070126)
Pass 58 through the data...
  smallest count = 11 in the cell      1025560
  Invoking rule 34953:25560=54960
  replace dpstoff5 = 1054960 if inlist(dpstoff5, 1034953, 1025560)
Pass 59 through the data...
  smallest count = 11 in the cell      5073650
  Invoking rule 80130:73650=150150
  replace dpstoff5 = 5150150 if inlist(dpstoff5, 5080130, 5073650)
Pass 60 through the data...
  smallest count = 12 in the cell      1020208
  Invoking rule 11:20208=30211
  replace dpstoff5 = 1030211 if inlist(dpstoff5, 1000011, 1020208)
Pass 61 through the data...
  smallest count = 12 in the cell      1033640
  Invoking rule 44:33640=43644
  replace dpstoff5 = 1043644 if inlist(dpstoff5, 1000044, 1033640)
Pass 62 through the data...
  smallest count = 15 in the cell      1000024
  Invoking rule 24:26=22426
  replace dpstoff5 = 1022426 if inlist(dpstoff5, 1000024, 1000026)
Pass 63 through the data...
  smallest count = 15 in the cell      3040111
  Invoking rule 40111:31826=70126
  replace dpstoff5 = 3070126 if inlist(dpstoff5, 3040111, 3031826)
Pass 64 through the data...
  smallest count = 15 in the cell      3054960
  Invoking rule 62:54960=64962
  replace dpstoff5 = 3064962 if inlist(dpstoff5, 3000062, 3054960)
Pass 65 through the data...
  smallest count = 18 in the cell      5074968
  Invoking rule 69:74968=84969
  replace dpstoff5 = 5084969 if inlist(dpstoff5, 5000069, 5074968)
Pass 66 through the data...
  smallest count = 21 in the cell      2200168
  Done collapsing! Exiting...

. assert "`r(failed)'" == ""      

