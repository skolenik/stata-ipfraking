. use trip_sample_rules, clear
{\smallskip}
. wgtcellcollapse collapse, variables(daypart board_id) mincellsize(1) ///
>         zeroes(39 40 44 49 55 60) ///
>         generate(dpston3) saving(dpston3.do) replace run
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
{\smallskip}
Processing zero cells...
{\smallskip}
  Invoking rule 49:50=24950 to collapse zero cells
  replace dpston3 = 1024950 if inlist(dpston3, 1000049, 1000050)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 40:44=24044 to collapse zero cells
  replace dpston3 = 2024044 if inlist(dpston3, 2000040, 2000044)
\smallskip
\oom
\smallskip
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 24950:25355:60=54960 to collapse zero cells
  replace dpston3 = 5054960 if inlist(dpston3, 5024950, 5025355, 5000060)
Pass 0 through the data...
  smallest count = 1 in the cell      2000039
Pass 12 through the data...
  smallest count = 1 in the cell      2000039
  Done collapsing! Exiting...
{\smallskip}
. wgtcellcollapse collapse, variables(daypart board_id) mincellsize(20) ///
>         strict feed(dpston3) saving(dpston3.do) append run
Pass 12 through the data...
  smallest count = 1 in the cell      2000039
  Invoking rule 39:24044=33944
  replace dpston3 = 2033944 if inlist(dpston3, 2000039, 2024044)
\smallskip
\oom
\smallskip
Pass 40 through the data...
  smallest count = 6 in the cell      4000002
  Invoking rule 1:2=20102
  replace dpston3 = 4020102 if inlist(dpston3, 4000001, 4000002)
Pass 41 through the data...
  smallest count = 7 in the cell      4025355
  WARNING: could not find any rules to collapse dpston3 == 4025355
Pass 42 through the data...
  smallest count = 7 in the cell      5025355
  WARNING: could not find any rules to collapse dpston3 == 5025355
Pass 43 through the data...
  smallest count = 8 in the cell      2021824
  Invoking rule 26:21824=31826
  replace dpston3 = 2031826 if inlist(dpston3, 2000026, 2021824)
\smallskip
\oom
\smallskip
Pass 57 through the data...
  smallest count = 19 in the cell      3025560
  Invoking rule 62:25560=35562
  replace dpston3 = 3035562 if inlist(dpston3, 3000062, 3025560)
Pass 58 through the data...
  smallest count = 20 in the cell      5026268
  Done collapsing! Exiting...
{\smallskip}
. wgtcellcollapse collapse, variables(daypart alight_id) mincellsize(1) ///
>         zeroes(2 8 36 39 40 44 47 49 50 55 60 62) ///
>         generate(dpstoff3) saving(dpstoff3.do) replace run
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
{\smallskip}
Processing zero cells...
{\smallskip}
  Invoking rule 39:40=23940 to collapse zero cells
  replace dpstoff3 = 1023940 if inlist(dpstoff3, 1000039, 1000040)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 2:8=20208 to collapse zero cells
  replace dpstoff3 = 2020208 if inlist(dpstoff3, 2000002, 2000008)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 30:36=23036 to collapse zero cells
  replace dpstoff3 = 2023036 if inlist(dpstoff3, 2000030, 2000036)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 26:30:36:39=42639 to collapse zero cells
  replace dpstoff3 = 2042639 if inlist(dpstoff3, 2000026, 2000030, 2000036, 2000039)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 24:26:30:36:39:40=62440 to collapse zero cells
  replace dpstoff3 = 2062440 if inlist(dpstoff3, 2000024, 2000026, 2000030, 2000036,
>  2000039, 2000040)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 44:62440=72444 to collapse zero cells
  replace dpstoff3 = 2072444 if inlist(dpstoff3, 2000044, 2062440)
\smallskip
\oom
\smallskip
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 24950:53:55:60=54960 to collapse zero cells
  replace dpstoff3 = 5054960 if inlist(dpstoff3, 5024950, 5000053, 5000055, 5000060)
Pass 0 through the data...
  smallest count = 1 in the cell      1000002
Pass 24 through the data...
  smallest count = 1 in the cell      1000002
  Done collapsing! Exiting...
{\smallskip}
. wgtcellcollapse collapse, variables(daypart alight_id) mincellsize(20) ///
>         strict feed(dpstoff3) saving(dpstoff3.do) append run
Pass 24 through the data...
  smallest count = 1 in the cell      1000002
  Invoking rule 2:8=20208
  replace dpstoff3 = 1020208 if inlist(dpstoff3, 1000002, 1000008)
Pass 25 through the data...
  smallest count = 1 in the cell      2000011
  Invoking rule 11:18=21118
  replace dpstoff3 = 2021118 if inlist(dpstoff3, 2000011, 2000018)
\smallskip
\oom
\smallskip
Pass 46 through the data...
  smallest count = 2 in the cell      5023639
  Invoking rule 23639:24044=43644
  replace dpstoff3 = 5043644 if inlist(dpstoff3, 5023639, 5024044)
Pass 47 through the data...
  smallest count = 2 in the cell      5025355
  WARNING: could not find any rules to collapse dpstoff3 == 5025355
\smallskip
\oom
\smallskip
Pass 51 through the data...
  smallest count = 4 in the cell      2023036
  WARNING: could not find any rules to collapse dpstoff3 == 2023036
Pass 52 through the data...
  smallest count = 4 in the cell      2110244
  Invoking rule 47:110244=120247
  replace dpstoff3 = 2120247 if inlist(dpstoff3, 2000047, 2110244)
\smallskip
\oom
\smallskip
Pass 76 through the data...
  smallest count = 16 in the cell      5026268
  Invoking rule 170260:26268=190268
  replace dpstoff3 = 5190268 if inlist(dpstoff3, 5170260, 5026268)
Pass 77 through the data...
  smallest count = 21 in the cell      4070230
  Done collapsing! Exiting...
